---
import Layout from "../../layout/Layout.astro";
import Footer from "../../layout/Footer.svelte";
import QuestionList from "../../components/QuestionList.svelte";
import QuestionForm from "../../components/QuestionForm.svelte";

const courseCode = Astro.params.courseCode;

const response = await fetch(`http://qa-api:7777/questions/${courseCode}`);
const questionsFromServer = await response.json();
---

<Layout>
  <QuestionList client:only="svelte" {courseCode} {questionsFromServer} class="flex-grow" />
  <Footer>
    <QuestionForm {courseCode} client:only="svelte" />
  </Footer>
</Layout>
