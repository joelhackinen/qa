// Copyright 2018-2024 the Deno authors. All rights reserved. MIT license.
// This module is browser compatible.
/**
 * Contains the functions {@linkcode accepts}, {@linkcode acceptsEncodings}, and
 * {@linkcode acceptsLanguages} to provide content negotiation capabilities.
 *
 * @module
 */ import { preferredEncodings } from "./_negotiation/encoding.ts";
import { preferredLanguages } from "./_negotiation/language.ts";
import { preferredMediaTypes } from "./_negotiation/media_type.ts";
export function accepts(request, ...types) {
  const accept = request.headers.get("accept");
  return types.length ? accept ? preferredMediaTypes(accept, types)[0] : types[0] : accept ? preferredMediaTypes(accept) : [
    "*/*"
  ];
}
export function acceptsEncodings(request, ...encodings) {
  const acceptEncoding = request.headers.get("accept-encoding");
  return encodings.length ? acceptEncoding ? preferredEncodings(acceptEncoding, encodings)[0] : encodings[0] : acceptEncoding ? preferredEncodings(acceptEncoding) : [
    "*"
  ];
}
export function acceptsLanguages(request, ...langs) {
  const acceptLanguage = request.headers.get("accept-language");
  return langs.length ? acceptLanguage ? preferredLanguages(acceptLanguage, langs)[0] : langs[0] : acceptLanguage ? preferredLanguages(acceptLanguage) : [
    "*"
  ];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0BzdGQvaHR0cC8wLjIyMy4wL25lZ290aWF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjQgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbi8qKlxuICogQ29udGFpbnMgdGhlIGZ1bmN0aW9ucyB7QGxpbmtjb2RlIGFjY2VwdHN9LCB7QGxpbmtjb2RlIGFjY2VwdHNFbmNvZGluZ3N9LCBhbmRcbiAqIHtAbGlua2NvZGUgYWNjZXB0c0xhbmd1YWdlc30gdG8gcHJvdmlkZSBjb250ZW50IG5lZ290aWF0aW9uIGNhcGFiaWxpdGllcy5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IHsgcHJlZmVycmVkRW5jb2RpbmdzIH0gZnJvbSBcIi4vX25lZ290aWF0aW9uL2VuY29kaW5nLnRzXCI7XG5pbXBvcnQgeyBwcmVmZXJyZWRMYW5ndWFnZXMgfSBmcm9tIFwiLi9fbmVnb3RpYXRpb24vbGFuZ3VhZ2UudHNcIjtcbmltcG9ydCB7IHByZWZlcnJlZE1lZGlhVHlwZXMgfSBmcm9tIFwiLi9fbmVnb3RpYXRpb24vbWVkaWFfdHlwZS50c1wiO1xuXG4vKiogTG9vc2UgY29weSBvZiB7QGxpbmtjb2RlIFJlcXVlc3R9LiAqL1xuZXhwb3J0IHR5cGUgUmVxdWVzdCA9IHtcbiAgaGVhZGVyczoge1xuICAgIGdldChrZXk6IHN0cmluZyk6IHN0cmluZyB8IG51bGw7XG4gIH07XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgbWVkaWEgdHlwZXMgYWNjZXB0ZWQgYnkgdGhlIHJlcXVlc3QsIGluIG9yZGVyIG9mXG4gKiBwcmVmZXJlbmNlLiBJZiB0aGVyZSBhcmUgbm8gbWVkaWEgdHlwZXMgc3VwcGxpZWQgaW4gdGhlIHJlcXVlc3QsIHRoZW4gYW55XG4gKiBtZWRpYSB0eXBlIHNlbGVjdG9yIHdpbGwgYmUgcmV0dXJuZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBhY2NlcHRzIH0gZnJvbSBcIkBzdGQvaHR0cC9uZWdvdGlhdGlvblwiO1xuICpcbiAqIGNvbnN0IHJlcSA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9cIiwge1xuICogICBoZWFkZXJzOiB7XG4gKiAgICAgXCJhY2NlcHRcIjpcbiAqICAgICAgIFwidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94aHRtbCt4bWwsIGFwcGxpY2F0aW9uL3htbDtxPTAuOSwgaW1hZ2Uvd2VicCwgKlxcLyo7cT0wLjhcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIGNvbnNvbGUubG9nKGFjY2VwdHMocmVxKSk7XG4gKiAvLyBbXG4gKiAvLyAgIFwidGV4dC9odG1sXCIsXG4gKiAvLyAgIFwiYXBwbGljYXRpb24veGh0bWwreG1sXCIsXG4gKiAvLyAgIFwiaW1hZ2Uvd2VicFwiLFxuICogLy8gICBcImFwcGxpY2F0aW9uL3htbFwiLFxuICogLy8gICBcIipcXC8qXCIsXG4gKiAvLyBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHMocmVxdWVzdDogUmVxdWVzdCk6IHN0cmluZ1tdO1xuLyoqXG4gKiBGb3IgYSBnaXZlbiBzZXQgb2YgbWVkaWEgdHlwZXMsIHJldHVybiB0aGUgYmVzdCBtYXRjaCBhY2NlcHRlZCBpbiB0aGVcbiAqIHJlcXVlc3QuIElmIG5vIG1lZGlhIHR5cGUgbWF0Y2hlcywgdGhlbiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiAgQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBhY2NlcHRzIH0gZnJvbSBcIkBzdGQvaHR0cC9uZWdvdGlhdGlvblwiO1xuICpcbiAqIGNvbnN0IHJlcSA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9cIiwge1xuICogICBoZWFkZXJzOiB7XG4gKiAgICAgXCJhY2NlcHRcIjpcbiAqICAgICAgIFwidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94aHRtbCt4bWwsIGFwcGxpY2F0aW9uL3htbDtxPTAuOSwgaW1hZ2Uvd2VicCwgKlxcLyo7cT0wLjhcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIGFjY2VwdHMocmVxLCBcInRleHQvaHRtbFwiLCBcImltYWdlL3dlYnBcIik7IC8vIFwidGV4dC9odG1sXCI7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHMoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXG4gIC4uLnR5cGVzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHMoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXG4gIC4uLnR5cGVzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQge1xuICBjb25zdCBhY2NlcHQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYWNjZXB0XCIpO1xuICByZXR1cm4gdHlwZXMubGVuZ3RoXG4gICAgPyBhY2NlcHQgPyBwcmVmZXJyZWRNZWRpYVR5cGVzKGFjY2VwdCwgdHlwZXMpWzBdIDogdHlwZXNbMF1cbiAgICA6IGFjY2VwdFxuICAgID8gcHJlZmVycmVkTWVkaWFUeXBlcyhhY2NlcHQpXG4gICAgOiBbXCIqLypcIl07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBjb250ZW50IGVuY29kaW5ncyBhY2NlcHRlZCBieSB0aGUgcmVxdWVzdCwgaW4gb3JkZXIgb2ZcbiAqIHByZWZlcmVuY2UuIElmIHRoZXJlIGFyZSBubyBlbmNvZGluZyBzdXBwbGllZCBpbiB0aGUgcmVxdWVzdCwgdGhlbiBgW1wiKlwiXWBcbiAqIGlzIHJldHVybmVkLCBpbXBseWluZyBhbnkgZW5jb2RpbmcgaXMgYWNjZXB0ZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBhY2NlcHRzRW5jb2RpbmdzIH0gZnJvbSBcIkBzdGQvaHR0cC9uZWdvdGlhdGlvblwiO1xuICpcbiAqIGNvbnN0IHJlcSA9IG5ldyBSZXF1ZXN0KFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9cIiwge1xuICogICBoZWFkZXJzOiB7IFwiYWNjZXB0LWVuY29kaW5nXCI6IFwiZGVmbGF0ZSwgZ3ppcDtxPTEuMCwgKjtxPTAuNVwiIH0sXG4gKiB9KTtcbiAqXG4gKiBhY2NlcHRzRW5jb2RpbmdzKHJlcSk7IC8vIFtcImRlZmxhdGVcIiwgXCJnemlwXCIsIFwiKlwiXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY2NlcHRzRW5jb2RpbmdzKHJlcXVlc3Q6IFJlcXVlc3QpOiBzdHJpbmdbXTtcbi8qKlxuICogRm9yIGEgZ2l2ZW4gc2V0IG9mIGNvbnRlbnQgZW5jb2RpbmdzLCByZXR1cm4gdGhlIGJlc3QgbWF0Y2ggYWNjZXB0ZWQgaW4gdGhlXG4gKiByZXF1ZXN0LiBJZiBubyBjb250ZW50IGVuY29kaW5ncyBtYXRjaCwgdGhlbiB0aGUgZnVuY3Rpb24gcmV0dXJuc1xuICogYHVuZGVmaW5lZGAuXG4gKlxuICogKipOT1RFOioqIFlvdSBzaG91bGQgYWx3YXlzIHN1cHBseSBgaWRlbnRpdHlgIGFzIG9uZSBvZiB0aGUgZW5jb2RpbmdzXG4gKiB0byBlbnN1cmUgdGhhdCB0aGVyZSBpcyBhIG1hdGNoIHdoZW4gdGhlIGBBY2NlcHQtRW5jb2RpbmdgIGhlYWRlciBpcyBwYXJ0XG4gKiBvZiB0aGUgcmVxdWVzdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IGFjY2VwdHNFbmNvZGluZ3MgfSBmcm9tIFwiQHN0ZC9odHRwL25lZ290aWF0aW9uXCI7XG4gKlxuICogY29uc3QgcmVxID0gbmV3IFJlcXVlc3QoXCJodHRwczovL2V4YW1wbGUuY29tL1wiLCB7XG4gKiAgIGhlYWRlcnM6IHsgXCJhY2NlcHQtZW5jb2RpbmdcIjogXCJkZWZsYXRlLCBnemlwO3E9MS4wLCAqO3E9MC41XCIgfSxcbiAqIH0pO1xuICpcbiAqIGFjY2VwdHNFbmNvZGluZ3MocmVxLCBcImd6aXBcIiwgXCJpZGVudGl0eVwiKTsgLy8gXCJnemlwXCJcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWNjZXB0c0VuY29kaW5ncyhcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgLi4uZW5jb2RpbmdzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHNFbmNvZGluZ3MoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXG4gIC4uLmVuY29kaW5nczogc3RyaW5nW11cbik6IHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgYWNjZXB0RW5jb2RpbmcgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYWNjZXB0LWVuY29kaW5nXCIpO1xuICByZXR1cm4gZW5jb2RpbmdzLmxlbmd0aFxuICAgID8gYWNjZXB0RW5jb2RpbmdcbiAgICAgID8gcHJlZmVycmVkRW5jb2RpbmdzKGFjY2VwdEVuY29kaW5nLCBlbmNvZGluZ3MpWzBdXG4gICAgICA6IGVuY29kaW5nc1swXVxuICAgIDogYWNjZXB0RW5jb2RpbmdcbiAgICA/IHByZWZlcnJlZEVuY29kaW5ncyhhY2NlcHRFbmNvZGluZylcbiAgICA6IFtcIipcIl07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBsYW5ndWFnZXMgYWNjZXB0ZWQgYnkgdGhlIHJlcXVlc3QsIGluIG9yZGVyIG9mXG4gKiBwcmVmZXJlbmNlLiBJZiB0aGVyZSBhcmUgbm8gbGFuZ3VhZ2VzIHN1cHBsaWVkIGluIHRoZSByZXF1ZXN0LCB0aGVuIGBbXCIqXCJdYFxuICogaXMgcmV0dXJuZWQsIGltcGx5IGFueSBsYW5ndWFnZSBpcyBhY2NlcHRlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IGFjY2VwdHNMYW5ndWFnZXMgfSBmcm9tIFwiQHN0ZC9odHRwL25lZ290aWF0aW9uXCI7XG4gKlxuICogY29uc3QgcmVxID0gbmV3IFJlcXVlc3QoXCJodHRwczovL2V4YW1wbGUuY29tL1wiLCB7XG4gKiAgIGhlYWRlcnM6IHtcbiAqICAgICBcImFjY2VwdC1sYW5ndWFnZVwiOiBcImZyLUNILCBmcjtxPTAuOSwgZW47cT0wLjgsIGRlO3E9MC43LCAqO3E9MC41XCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBhY2NlcHRzTGFuZ3VhZ2VzKHJlcSk7IC8vIFtcImZyLUNIXCIsIFwiZnJcIiwgXCJlblwiLCBcImRlXCIsIFwiKlwiXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY2NlcHRzTGFuZ3VhZ2VzKHJlcXVlc3Q6IFJlcXVlc3QpOiBzdHJpbmdbXTtcbi8qKlxuICogRm9yIGEgZ2l2ZW4gc2V0IG9mIGxhbmd1YWdlcywgcmV0dXJuIHRoZSBiZXN0IG1hdGNoIGFjY2VwdGVkIGluIHRoZSByZXF1ZXN0LlxuICogSWYgbm8gbGFuZ3VhZ2VzIG1hdGNoLCB0aGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB1bmRlZmluZWRgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgYWNjZXB0c0xhbmd1YWdlcyB9IGZyb20gXCJAc3RkL2h0dHAvbmVnb3RpYXRpb25cIjtcbiAqXG4gKiBjb25zdCByZXEgPSBuZXcgUmVxdWVzdChcImh0dHBzOi8vZXhhbXBsZS5jb20vXCIsIHtcbiAqICAgaGVhZGVyczoge1xuICogICAgIFwiYWNjZXB0LWxhbmd1YWdlXCI6IFwiZnItQ0gsIGZyO3E9MC45LCBlbjtxPTAuOCwgZGU7cT0wLjcsICo7cT0wLjVcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIGFjY2VwdHNMYW5ndWFnZXMocmVxLCBcImVuLWdiXCIsIFwiZW4tdXNcIiwgXCJlblwiKTsgLy8gXCJlblwiXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHNMYW5ndWFnZXMoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXG4gIC4uLmxhbmdzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIGFjY2VwdHNMYW5ndWFnZXMoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXG4gIC4uLmxhbmdzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQge1xuICBjb25zdCBhY2NlcHRMYW5ndWFnZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJhY2NlcHQtbGFuZ3VhZ2VcIik7XG4gIHJldHVybiBsYW5ncy5sZW5ndGhcbiAgICA/IGFjY2VwdExhbmd1YWdlID8gcHJlZmVycmVkTGFuZ3VhZ2VzKGFjY2VwdExhbmd1YWdlLCBsYW5ncylbMF0gOiBsYW5nc1swXVxuICAgIDogYWNjZXB0TGFuZ3VhZ2VcbiAgICA/IHByZWZlcnJlZExhbmd1YWdlcyhhY2NlcHRMYW5ndWFnZSlcbiAgICA6IFtcIipcIl07XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMEVBQTBFO0FBQzFFLHFDQUFxQztBQUVyQzs7Ozs7Q0FLQyxHQUVELFNBQVMsa0JBQWtCLFFBQVEsNkJBQTZCO0FBQ2hFLFNBQVMsa0JBQWtCLFFBQVEsNkJBQTZCO0FBQ2hFLFNBQVMsbUJBQW1CLFFBQVEsK0JBQStCO0FBMERuRSxPQUFPLFNBQVMsUUFDZCxPQUFnQixFQUNoQixHQUFHLEtBQWU7RUFFbEIsTUFBTSxTQUFTLFFBQVEsT0FBTyxDQUFDLEdBQUcsQ0FBQztFQUNuQyxPQUFPLE1BQU0sTUFBTSxHQUNmLFNBQVMsb0JBQW9CLFFBQVEsTUFBTSxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUN6RCxTQUNBLG9CQUFvQixVQUNwQjtJQUFDO0dBQU07QUFDYjtBQTJDQSxPQUFPLFNBQVMsaUJBQ2QsT0FBZ0IsRUFDaEIsR0FBRyxTQUFtQjtFQUV0QixNQUFNLGlCQUFpQixRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUM7RUFDM0MsT0FBTyxVQUFVLE1BQU0sR0FDbkIsaUJBQ0UsbUJBQW1CLGdCQUFnQixVQUFVLENBQUMsRUFBRSxHQUNoRCxTQUFTLENBQUMsRUFBRSxHQUNkLGlCQUNBLG1CQUFtQixrQkFDbkI7SUFBQztHQUFJO0FBQ1g7QUEwQ0EsT0FBTyxTQUFTLGlCQUNkLE9BQWdCLEVBQ2hCLEdBQUcsS0FBZTtFQUVsQixNQUFNLGlCQUFpQixRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUM7RUFDM0MsT0FBTyxNQUFNLE1BQU0sR0FDZixpQkFBaUIsbUJBQW1CLGdCQUFnQixNQUFNLENBQUMsRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQ3hFLGlCQUNBLG1CQUFtQixrQkFDbkI7SUFBQztHQUFJO0FBQ1gifQ==